{% extends 'main.html' %}
{% load static %}

{% block content %}

<!-- Load jquery library -->
<!-- <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script> -->

<h1>{{product_ref.name}}</h1>

{% if product_ref.picture is null %} 
    <img src="{% static 'ImageNotFound.png' %}" style="height:30vh"/>
{% else %}
    <img src="{{product_ref.picture}}" style="height:30vh;"/>
{% endif %}

<p>Price (â‚¬): {{product_ref.price}}</p>

{% for field in specific_fields %}
    <p>{{field.verbose_name}}: {{specific_ref|get_attr:field.name}}</p>
{% endfor %}

<br>
<br>

{% if user.is_authenticated %}

    {% if product_ref|alreadyAdded %}

    Shopping cart: <span style="color:green;"> already added</span>

    {% else %}

    <form method="POST">
        Shopping cart:
        {% csrf_token %}
        {{ ShoppingForm.quantity }}
        <input type="submit" value="Add"/>
    </form>

    {% endif %}

    {% comment %}
    <div id="msg" style="color:green;">
    {% for message in messages %}
        <p>{{message}}</p>
    {% endfor %}
    </div>

    <script>
        setTimeout(function(){
            if ($('#msg').length > 0) {
                $('#msg').remove();
            }
        },2000)
    </script>
    {% endcomment %}

{% endif %}
{% endblock content %}
